<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Generator | Zachary Helbig</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--primary:#ff3b3b;--secondary:#ff6b6b;--accent:#cc0000;--dark:#0a0a0a;--darker:#050505;--grey:#1a1a1a;--grey-light:#2d2d2d;--glass:rgba(255,255,255,0.03);--glass-border:rgba(255,255,255,0.08);--text:#e4e4e7;--text-muted:#a1a1a1;--green:#22c55e;--yellow:#eab308;--orange:#f97316;--red-soft:#ef4444}
        html{scroll-behavior:smooth}
        body{font-family:'Outfit',sans-serif;background:var(--darker);color:var(--text);min-height:100vh;overflow-x:hidden;line-height:1.6}

        .grid-bg{position:fixed;top:0;left:0;width:100%;height:100%;background-image:linear-gradient(rgba(255,59,59,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(255,59,59,0.03) 1px,transparent 1px);background-size:60px 60px;z-index:-2;animation:gridMove 20s linear infinite}
        @keyframes gridMove{0%{transform:translate(0,0)}100%{transform:translate(60px,60px)}}
        .orb{position:fixed;border-radius:50%;filter:blur(80px);z-index:-1;animation:float 20s ease-in-out infinite}
        .orb-1{width:600px;height:600px;background:radial-gradient(circle,rgba(255,59,59,0.12) 0%,transparent 70%);top:-200px;right:-200px}
        .orb-2{width:500px;height:500px;background:radial-gradient(circle,rgba(204,0,0,0.08) 0%,transparent 70%);bottom:-150px;left:-150px;animation-delay:-10s}
        .orb-3{width:400px;height:400px;background:radial-gradient(circle,rgba(255,107,107,0.08) 0%,transparent 70%);top:50%;left:50%;transform:translate(-50%,-50%);animation-delay:-5s}
        @keyframes float{0%,100%{transform:translate(0,0) scale(1)}25%{transform:translate(30px,-30px) scale(1.05)}50%{transform:translate(-20px,20px) scale(0.95)}75%{transform:translate(20px,30px) scale(1.02)}}

        .nav{position:fixed;top:0;left:0;right:0;padding:1.5rem 3rem;display:flex;justify-content:space-between;align-items:center;z-index:1000;background:rgba(5,5,5,0.8);backdrop-filter:blur(20px);border-bottom:1px solid var(--glass-border)}
        .logo{font-size:1.5rem;font-weight:700;background:linear-gradient(135deg,var(--primary),var(--secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-decoration:none}
        .nav-links{display:flex;gap:2.5rem;list-style:none}
        .nav-links a{color:var(--text-muted);text-decoration:none;font-weight:500;font-size:0.95rem;transition:all 0.3s ease;position:relative}
        .nav-links a::after{content:'';position:absolute;bottom:-5px;left:0;width:0;height:2px;background:linear-gradient(90deg,var(--primary),var(--secondary));transition:width 0.3s ease}
        .nav-links a:hover,.nav-links a.active{color:var(--text)}
        .nav-links a:hover::after,.nav-links a.active::after{width:100%}
        .mobile-menu-btn{display:none;flex-direction:column;gap:5px;background:none;border:none;cursor:pointer;padding:5px}
        .mobile-menu-btn span{width:25px;height:2px;background:var(--text);transition:all 0.3s ease}

        .page-header{padding:10rem 3rem 3rem;text-align:center}
        .page-badge{display:inline-flex;align-items:center;gap:0.5rem;padding:0.5rem 1rem;background:var(--glass);border:1px solid var(--glass-border);border-radius:50px;font-size:0.85rem;color:var(--primary);margin-bottom:1.5rem;animation:fadeInUp 0.6s ease forwards}
        .page-title{font-size:clamp(2.5rem,5vw,3.5rem);font-weight:700;margin-bottom:1rem;animation:fadeInUp 0.6s ease 0.1s forwards;opacity:0}
        .page-title .gradient{background:linear-gradient(135deg,var(--primary),var(--secondary),#ff8a8a);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
        .page-subtitle{font-size:1.1rem;color:var(--text-muted);max-width:550px;margin:0 auto;animation:fadeInUp 0.6s ease 0.2s forwards;opacity:0}
        @keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

        .main-container{max-width:560px;margin:0 auto;padding:2rem 3rem 6rem}
        .back-link{display:inline-flex;align-items:center;gap:0.5rem;color:var(--text-muted);text-decoration:none;font-size:0.9rem;font-weight:500;transition:all 0.3s;margin-bottom:1.5rem;animation:fadeInUp 0.6s ease 0.25s forwards;opacity:0}
        .back-link:hover{color:var(--primary);gap:0.35rem}
        .back-link svg{width:16px;height:16px;transition:transform 0.3s}
        .back-link:hover svg{transform:translateX(-3px)}

        .card{background:var(--glass);border:1px solid var(--glass-border);border-radius:20px;padding:2rem;position:relative;overflow:hidden;animation:fadeInUp 0.6s ease 0.3s forwards;opacity:0}
        .card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--primary),var(--secondary));opacity:0.8}

        .password-display{background:rgba(0,0,0,0.3);border:1px solid var(--glass-border);border-radius:14px;padding:1.25rem;display:flex;align-items:center;gap:12px;margin-bottom:12px;transition:border-color 0.3s}
        .password-display:hover{border-color:rgba(255,59,59,0.3)}
        .password-text{flex:1;font-family:'JetBrains Mono',monospace;font-size:1.05rem;font-weight:500;letter-spacing:0.5px;color:var(--text);word-break:break-all;line-height:1.5;user-select:all;min-height:26px}
        .password-actions{display:flex;gap:6px;flex-shrink:0}
        .icon-btn{width:38px;height:38px;display:flex;align-items:center;justify-content:center;background:var(--glass);border:1px solid var(--glass-border);border-radius:10px;cursor:pointer;color:var(--text-muted);transition:all 0.3s ease;font-size:15px}
        .icon-btn:hover{color:var(--text);border-color:rgba(255,59,59,0.3);box-shadow:0 0 15px rgba(255,59,59,0.1)}
        .icon-btn.copied{color:var(--green);border-color:var(--green)}

        .strength-row{display:flex;align-items:center;gap:12px;margin-bottom:1.75rem;padding:0 2px}
        .strength-bars{display:flex;gap:4px;flex:1}
        .strength-seg{height:4px;flex:1;background:var(--grey-light);border-radius:2px;transition:background 0.4s}
        .strength-label{font-size:0.7rem;font-weight:600;letter-spacing:0.5px;text-transform:uppercase;min-width:75px;text-align:right;color:var(--text-muted);transition:color 0.4s}

        .section{margin-bottom:1.75rem}
        .section-label{font-size:0.75rem;font-weight:600;color:var(--text-muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:0.75rem}

        .length-row{display:flex;align-items:center;gap:1rem}
        .length-value{font-family:'JetBrains Mono',monospace;font-size:1.75rem;font-weight:700;color:var(--primary);width:56px;text-align:center;text-shadow:0 0 20px rgba(255,59,59,0.3);background:none;border:1px solid transparent;border-radius:8px;outline:none;-moz-appearance:textfield;transition:border-color 0.3s}
        .length-value:focus{border-color:rgba(255,59,59,0.4);box-shadow:0 0 0 3px rgba(255,59,59,0.08)}
        .length-value::-webkit-outer-spin-button,.length-value::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}
        .slider-wrap{flex:1}
        input[type="range"]{-webkit-appearance:none;appearance:none;width:100%;height:6px;background:var(--grey-light);border-radius:3px;outline:none;cursor:pointer}
        input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;width:22px;height:22px;background:var(--primary);border-radius:50%;cursor:pointer;box-shadow:0 0 12px rgba(255,59,59,0.3),0 2px 8px rgba(0,0,0,0.3);transition:transform 0.15s}
        input[type="range"]::-webkit-slider-thumb:hover{transform:scale(1.15);box-shadow:0 0 20px rgba(255,59,59,0.4)}
        input[type="range"]::-moz-range-thumb{width:22px;height:22px;background:var(--primary);border-radius:50%;cursor:pointer;border:none;box-shadow:0 0 12px rgba(255,59,59,0.3)}
        .length-bounds{display:flex;justify-content:space-between;margin-top:6px;font-size:0.7rem;color:var(--text-muted);font-family:'JetBrains Mono',monospace}

        .toggle-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
        .toggle-item{display:flex;align-items:center;gap:10px;background:rgba(0,0,0,0.2);border:1px solid var(--glass-border);border-radius:12px;padding:0.75rem 0.9rem;cursor:pointer;transition:all 0.3s ease;user-select:none}
        .toggle-item:hover{border-color:rgba(255,255,255,0.15)}
        .toggle-item.active{border-color:rgba(255,59,59,0.4);background:rgba(255,59,59,0.06);box-shadow:0 0 15px rgba(255,59,59,0.08)}
        .toggle-check{width:18px;height:18px;border-radius:5px;border:2px solid var(--grey-light);display:flex;align-items:center;justify-content:center;transition:all 0.2s;flex-shrink:0;font-size:11px;color:transparent}
        .toggle-item.active .toggle-check{background:var(--primary);border-color:var(--primary);color:white}
        .toggle-label{font-size:0.85rem;font-weight:500;color:var(--text-muted);transition:color 0.2s}
        .toggle-item.active .toggle-label{color:var(--text)}
        .toggle-preview{font-family:'JetBrains Mono',monospace;font-size:0.7rem;color:var(--text-muted);margin-left:auto;opacity:0.6}

        .exclude-input{width:100%;background:rgba(0,0,0,0.3);border:1px solid var(--glass-border);border-radius:12px;padding:0.7rem 1rem;font-family:'JetBrains Mono',monospace;font-size:0.85rem;color:var(--text);outline:none;transition:border-color 0.3s}
        .exclude-input::placeholder{color:var(--text-muted);opacity:0.5}
        .exclude-input:focus{border-color:rgba(255,59,59,0.4);box-shadow:0 0 0 3px rgba(255,59,59,0.08)}

        .generate-btn{width:100%;padding:1rem;font-family:'Outfit',sans-serif;font-size:0.95rem;font-weight:600;color:white;background:linear-gradient(135deg,var(--primary),var(--accent));border:none;border-radius:14px;cursor:pointer;letter-spacing:0.3px;transition:all 0.3s ease;margin-bottom:10px}
        .generate-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(255,59,59,0.25)}
        .generate-btn:active{transform:translateY(0)}

        .batch-row{display:flex;gap:8px}
        .batch-btn{flex:1;padding:0.7rem;font-family:'Outfit',sans-serif;font-size:0.8rem;font-weight:600;color:var(--text-muted);background:var(--glass);border:1px solid var(--glass-border);border-radius:12px;cursor:pointer;transition:all 0.3s ease}
        .batch-btn:hover{color:var(--text);border-color:rgba(255,59,59,0.3);box-shadow:0 0 15px rgba(255,59,59,0.08)}

        .history-section{margin-top:1.5rem}
        .history-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
        .history-title{font-size:0.75rem;font-weight:600;color:var(--text-muted);text-transform:uppercase;letter-spacing:1px}
        .history-clear{font-size:0.7rem;color:var(--text-muted);cursor:pointer;background:none;border:none;font-family:'Outfit',sans-serif;transition:color 0.2s}
        .history-clear:hover{color:var(--red-soft)}
        .history-list{display:flex;flex-direction:column;gap:4px;max-height:180px;overflow-y:auto}
        .history-list::-webkit-scrollbar{width:4px}
        .history-list::-webkit-scrollbar-track{background:transparent}
        .history-list::-webkit-scrollbar-thumb{background:var(--grey-light);border-radius:2px}
        .history-item{display:flex;align-items:center;gap:10px;background:rgba(0,0,0,0.2);border:1px solid transparent;border-radius:10px;padding:0.5rem 0.75rem;cursor:pointer;transition:all 0.2s}
        .history-item:hover{border-color:var(--glass-border);background:var(--glass)}
        .history-pw{font-family:'JetBrains Mono',monospace;font-size:0.75rem;color:var(--text-muted);flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
        .history-meta{font-size:0.65rem;color:var(--text-muted);white-space:nowrap;opacity:0.6}
        .history-copy{font-size:0.75rem;opacity:0;transition:opacity 0.2s;color:var(--text-muted)}
        .history-item:hover .history-copy{opacity:1}
        .empty-history{text-align:center;padding:1.25rem;color:var(--text-muted);font-size:0.85rem;opacity:0.5}

        .toast{position:fixed;bottom:32px;left:50%;transform:translateX(-50%) translateY(60px);background:rgba(10,10,10,0.95);border:1px solid var(--green);color:var(--green);padding:0.65rem 1.25rem;border-radius:12px;font-size:0.85rem;font-weight:500;box-shadow:0 8px 30px rgba(0,0,0,0.4),0 0 15px rgba(34,197,94,0.15);opacity:0;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);z-index:999;pointer-events:none;backdrop-filter:blur(20px)}
        .toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

        footer{text-align:center;padding:3rem;border-top:1px solid var(--glass-border);color:var(--text-muted);font-size:0.9rem}

        @media(max-width:768px){
            .nav{padding:1rem 1.5rem}
            .mobile-menu-btn{display:flex}
            .nav-links{position:fixed;top:70px;left:0;right:0;background:rgba(5,5,5,0.98);backdrop-filter:blur(20px);flex-direction:column;padding:2rem;gap:1.5rem;transform:translateY(-150%);transition:transform 0.3s ease}
            .nav-links.active{transform:translateY(0)}
            .page-header{padding:8rem 1.5rem 2rem}
            .main-container{padding:1.5rem 1.5rem 4rem}
            .toggle-grid{grid-template-columns:1fr}
        }
    </style>
</head>
<body>
    <div class="grid-bg"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <nav class="nav">
        <a href="index.html" class="logo">ZH</a>
        <button class="mobile-menu-btn" onclick="toggleMenu()"><span></span><span></span><span></span></button>
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="resume.html">Resume</a></li>
            <li><a href="projects.html">Projects</a></li>
            <li><a href="tools.html" class="active">Tools</a></li>
        </ul>
    </nav>

    <header class="page-header">
        <div class="page-badge">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
            Security Utility
        </div>
        <h1 class="page-title"><span class="gradient">Password</span> Generator</h1>
        <p class="page-subtitle">Generate cryptographically secure passwords with customizable complexity, length, and character options.</p>
    </header>

    <div class="main-container">
        <a href="tools.html" class="back-link">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5"/><path d="m12 19-7-7 7-7"/></svg>
            Back to Tools
        </a>

        <div class="card">
            <div class="password-display">
                <div class="password-text" id="passwordText">Click generate to start</div>
                <div class="password-actions">
                    <button class="icon-btn" id="copyBtn" title="Copy" onclick="copyPassword()">ðŸ“‹</button>
                </div>
            </div>

            <div class="strength-row">
                <div class="strength-bars">
                    <div class="strength-seg" id="seg1"></div>
                    <div class="strength-seg" id="seg2"></div>
                    <div class="strength-seg" id="seg3"></div>
                    <div class="strength-seg" id="seg4"></div>
                    <div class="strength-seg" id="seg5"></div>
                </div>
                <span class="strength-label" id="strengthLabel">â€”</span>
            </div>

            <div class="section">
                <div class="section-label">Length</div>
                <div class="length-row">
                    <input type="number" class="length-value" id="lengthValue" value="16" min="4" max="64" oninput="updateLengthFromInput()">
                    <div class="slider-wrap">
                        <input type="range" id="lengthSlider" min="4" max="64" value="16" oninput="updateLength()">
                        <div class="length-bounds"><span>4</span><span>64</span></div>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-label">Character Types</div>
                <div class="toggle-grid">
                    <div class="toggle-item active" data-type="uppercase" onclick="toggleOption(this)">
                        <div class="toggle-check">âœ“</div>
                        <span class="toggle-label">Uppercase</span>
                        <span class="toggle-preview">A-Z</span>
                    </div>
                    <div class="toggle-item active" data-type="lowercase" onclick="toggleOption(this)">
                        <div class="toggle-check">âœ“</div>
                        <span class="toggle-label">Lowercase</span>
                        <span class="toggle-preview">a-z</span>
                    </div>
                    <div class="toggle-item active" data-type="numbers" onclick="toggleOption(this)">
                        <div class="toggle-check">âœ“</div>
                        <span class="toggle-label">Numbers</span>
                        <span class="toggle-preview">0-9</span>
                    </div>
                    <div class="toggle-item active" data-type="symbols" onclick="toggleOption(this)">
                        <div class="toggle-check">âœ“</div>
                        <span class="toggle-label">Symbols</span>
                        <span class="toggle-preview">!@#$</span>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-label">Exclude Characters</div>
                <input type="text" class="exclude-input" id="excludeInput" placeholder="e.g. 0OIl1|" oninput="generatePassword()">
            </div>

            <button class="generate-btn" onclick="generatePassword()">âš¡ Generate Password</button>

            <div class="batch-row">
                <button class="batch-btn" onclick="batchGenerate(5)">Generate 5</button>
                <button class="batch-btn" onclick="batchGenerate(10)">Generate 10</button>
            </div>

            <div class="history-section">
                <div class="history-header">
                    <span class="history-title">History</span>
                    <button class="history-clear" onclick="clearHistory()">Clear all</button>
                </div>
                <div class="history-list" id="historyList">
                    <div class="empty-history">No passwords generated yet</div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Zachary Helbig. All rights reserved.</p>
    </footer>

    <div class="toast" id="toast">âœ“ Copied to clipboard</div>

    <script>
        const CHARSETS = {
            uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
            lowercase: 'abcdefghijklmnopqrstuvwxyz',
            numbers: '0123456789',
            symbols: '!@#$%^&*()_+-=[]{}|;:,.<>?/~`'
        };
        let history = [];
        let currentPassword = '';

        function toggleMenu() {
            document.querySelector('.nav-links').classList.toggle('active');
        }

        function getActiveTypes() {
            return Array.from(document.querySelectorAll('.toggle-item.active')).map(el => el.dataset.type);
        }

        function toggleOption(el) {
            if (el.classList.contains('active') && document.querySelectorAll('.toggle-item.active').length <= 1) {
                showToast('âš  At least one type required');
                return;
            }
            el.classList.toggle('active');
            generatePassword();
        }

        function updateLength() {
            document.getElementById('lengthValue').value = document.getElementById('lengthSlider').value;
            updateSliderFill();
            generatePassword();
        }

        function updateLengthFromInput() {
            let val = parseInt(document.getElementById('lengthValue').value);
            if (isNaN(val)) return;
            val = Math.min(64, Math.max(4, val));
            document.getElementById('lengthSlider').value = val;
            updateSliderFill();
            generatePassword();
        }

        function getCharPool() {
            const types = getActiveTypes();
            const exclude = document.getElementById('excludeInput').value;
            let pool = '';
            types.forEach(t => pool += CHARSETS[t]);
            if (exclude) pool = pool.split('').filter(c => !exclude.includes(c)).join('');
            return pool;
        }

        function generatePassword() {
            const pool = getCharPool();
            const length = parseInt(document.getElementById('lengthSlider').value);
            if (!pool.length) {
                document.getElementById('passwordText').textContent = 'No characters available';
                updateStrength(0);
                return;
            }
            const array = new Uint32Array(length);
            crypto.getRandomValues(array);
            const types = getActiveTypes();
            const exclude = document.getElementById('excludeInput').value;
            let pw = [];

            types.forEach((type, i) => {
                let chars = CHARSETS[type];
                if (exclude) chars = chars.split('').filter(c => !exclude.includes(c)).join('');
                if (chars.length) pw.push(chars[array[i] % chars.length]);
            });
            for (let i = pw.length; i < length; i++) pw.push(pool[array[i] % pool.length]);

            const shuffle = new Uint32Array(pw.length);
            crypto.getRandomValues(shuffle);
            for (let i = pw.length - 1; i > 0; i--) {
                const j = shuffle[i] % (i + 1);
                [pw[i], pw[j]] = [pw[j], pw[i]];
            }

            currentPassword = pw.join('');
            document.getElementById('passwordText').textContent = currentPassword;
            updateStrength(calcStrength(currentPassword));
            addToHistory(currentPassword);
        }

        function calcStrength(pw) {
            let s = 0, len = pw.length;
            if (len >= 8) s++;
            if (len >= 12) s++;
            if (len >= 20) s++;
            if (len >= 32) s++;
            if (/[a-z]/.test(pw)) s++;
            if (/[A-Z]/.test(pw)) s++;
            if (/[0-9]/.test(pw)) s++;
            if (/[^a-zA-Z0-9]/.test(pw)) s++;
            let pool = 0;
            if (/[a-z]/.test(pw)) pool += 26;
            if (/[A-Z]/.test(pw)) pool += 26;
            if (/[0-9]/.test(pw)) pool += 10;
            if (/[^a-zA-Z0-9]/.test(pw)) pool += 30;
            const entropy = len * Math.log2(pool || 1);
            if (entropy >= 128) s += 2; else if (entropy >= 80) s++;
            return Math.min(5, Math.max(0, Math.round(s / 2)));
        }

        function updateStrength(level) {
            const colors = ['var(--red-soft)','var(--red-soft)','var(--orange)','var(--yellow)','var(--green)','var(--green)'];
            const labels = ['Very Weak','Weak','Fair','Good','Strong','Excellent'];
            for (let i = 1; i <= 5; i++) document.getElementById('seg'+i).style.background = i <= level ? colors[level] : 'var(--grey-light)';
            const l = document.getElementById('strengthLabel');
            l.textContent = labels[level];
            l.style.color = colors[level];
        }

        function copyPassword() {
            if (!currentPassword) return;
            navigator.clipboard.writeText(currentPassword).then(() => {
                const btn = document.getElementById('copyBtn');
                btn.classList.add('copied');
                btn.textContent = 'âœ…';
                showToast('âœ“ Copied to clipboard');
                setTimeout(() => { btn.classList.remove('copied'); btn.textContent = 'ðŸ“‹'; }, 1500);
            });
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.textContent = msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 2000);
        }

        function addToHistory(pw) {
            history.unshift({ password: pw, length: pw.length });
            if (history.length > 20) history.pop();
            renderHistory();
        }

        function renderHistory() {
            const list = document.getElementById('historyList');
            if (!history.length) { list.innerHTML = '<div class="empty-history">No passwords generated yet</div>'; return; }
            list.innerHTML = history.map((item, i) => `
                <div class="history-item" onclick="copyHistoryItem(${i})">
                    <span class="history-pw">${escapeHtml(item.password)}</span>
                    <span class="history-meta">${item.length} chars</span>
                    <span class="history-copy">ðŸ“‹</span>
                </div>`).join('');
        }

        function escapeHtml(s) { const d = document.createElement('div'); d.textContent = s; return d.innerHTML; }
        function copyHistoryItem(i) { navigator.clipboard.writeText(history[i].password).then(() => showToast('âœ“ Copied to clipboard')); }
        function clearHistory() { history = []; renderHistory(); }
        function batchGenerate(n) { for (let i = 0; i < n; i++) generatePassword(); showToast(`âœ“ Generated ${n} passwords`); }

        function updateSliderFill() {
            const s = document.getElementById('lengthSlider');
            const pct = ((s.value - s.min) / (s.max - s.min)) * 100;
            s.style.background = `linear-gradient(to right, var(--primary) 0%, var(--primary) ${pct}%, var(--grey-light) ${pct}%, var(--grey-light) 100%)`;
        }

        document.getElementById('lengthSlider').addEventListener('input', updateSliderFill);
        updateSliderFill();
        generatePassword();
    </script>
</body>
</html>
